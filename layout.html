<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="node_modules/bootstrap/dist/css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="src/css/style.css">
    <script src="./node_modules/leapjs/leap-1.1.0.js"></script>
    <title></title>
</head>

<body>
    <!-- TODO -->
    <div class="row" style="background-color: #E1E1E1; display: flex;">
        <div id="navbar" class="col-sm-3 navbar">
            <ul>
                <li class="nav-item selected" type="button" id="1" onclick="select(1)"><a href="#">Pengenalan</a></li>
                <li class="nav-item" type="button" id="2" onclick="select(2)"><a href="#" class="">Tes</a></li>
                <li class="nav-item" type="button" id="3" onclick="select(3)"><a href="#" class="">Permainan</a></li>
            </ul>
        </div>
        <div class="col-sm-9 content" style="background-color: #F9F9F9; padding: 0vh 1vh 0vh vh;">
            <h1 id="header" style="color: #707070;">Pengenalan</h1>
            <div id="pengenalan">
                <iframe src="./visualizer.html" frameborder="0" width="800" height="300"></iframe>
                <p id="info"></p>
            </div>
            <div id="tes" style="padding: 10vh 10vh;">
                
                
                <div id="alphabet" style="border-radius: 1vh; border: 5px solid lightgrey; width: 10vh; height: 10vh; text-align: center;  justify-items: center;" ></div>
                <br>
                <button type="button" onclick="knn('A')">A</button>
                <button type="button" onclick="knn('B')">B</button>
                <!-- <button onclick="randomAlphabet()" style="height: 5vh; width: 10vh; border-radius: 50vh; background-color: #cc1515;">Next</button> -->
            </div>
            <div id="permainan">
                <iframe src="./src/run-dino/index.html" name="myIframe" width="800" height="300"
                    scrolling="no"></iframe>
            </div>
        </div>
    </div>
    <script>
        window.$ = window.jquery = require("jquery");
        window.popper = require("popper.js");
        require("bootstrap");
    </script>
    <script>
        // document.getElementById("navbar").innerHTML='<object type="text/html" data="navbar.html" ></object>';
        var navbar = document.getElementsByClassName("nav-item")
        const reset = () => {
            for (var i = 0; i < navbar.length; i++) {
                var text = navbar[i].textContent.toLowerCase();
                navbar[i].setAttribute('class', "nav-item");
                document.getElementById(text).setAttribute('class', text + " hidden");

            }
        };
        const select = (id) => {
            reset();
            var selected = document.getElementById(id);
            var text = selected.textContent;
            document.getElementById("header").innerHTML = text;
            selected.setAttribute('class', "nav-item selected")
            document.getElementById(text.toLowerCase()).setAttribute('class', "");
        }        
        select(1);
    </script>
    <script>
        var alphabet = document.getElementById('alphabet');

        const knn = (huruf) => {
            alphabet.innerHTML = '<h2> </h2>';
            var first = (huruf=='A') ? 'A' : 'B'
            var second = (first=='A') ? 'B' : 'A'
            var randomnumber = Math.floor(Math.random() * (100 - 1 + 1)) + 1
            var pengenalanHuruf = (randomnumber<70) ? first : second

            setTimeout(function(){
                alphabet.innerHTML = '<h2>'+pengenalanHuruf+'</h2>';
            }, 500);

        }
        const randomAlphabet = () => {
            var random = String.fromCharCode(65+Math.floor(Math.random() * 26));
            if(random == alphabet.textContent)
                randomAlphabet();
            alphabet.innerHTML = '<h2>'+random+'</h2>';
        }
        // randomAlphabet();
    </script>
    <script>
        $(document).ready(function () {
            $('#permainan').attr('src', './src/run-dino/index.html');
        });
    </script>
    <script>
        var info = document.getElementById('info');

        var controller = new Leap.Controller({
            host: '127.0.0.1',
            port: 6437,
            enableGestures: false,
            frameEventName: 'deviceFrame',
            useAllPlugins: true
        });

        controller.connect();
        var lastValidFrameId;
        var printed;
        window.TO_RAD = Math.PI / 180;
        window.TO_DEG = 1 / TO_RAD; 
        Leap.loop({
            
            // frame callback is run before individual frame components
            frame: function (frame) {
                if(lastValidFrameId!=undefined && printed == false && frame.hands.length == 0){
                    tes();
                    printed = true;
                }
                info.innerHTML = frame.currentFrameRate
            },

            // hand callbacks are run once for each hand in the frame
            hand: function (hand) {
                printed = false;
                lastValidFrameId = hand.frame.id
                info.innerHTML += hand.type + ',' + hand.palmPosition + ',' + hand.direction + ',' + hand.palmVelocity + '<br/>';
                hand.fingers.forEach(function (finger) {
                    info.innerHTML += finger.type + ',' + finger.dipPosition + ',' + finger.pipPosition + ',' + finger.mcpPosition + ',' + finger.carpPosition + '<br/>'
                })
            }
        });
        var tes = () => {
            console.log(controller.frame(0).id + " " + controller.frame(20).id)
        }
    </script>
</body>

</html>